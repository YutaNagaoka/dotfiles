- name: Update apt
  apt:
    update_cache: yes
    upgrade: "yes"
  become: yes

- name: Install tools via apt
  apt:
    pkg:
      - curl
      - file
      - libssl-dev
      - ltrace
      - strace
      - vim
      - zsh
  become: yes
  ignore_errors: yes

- name: Install linuxbrew
  shell:
    cmd: |
      /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
    creates: |
      "/home/linuxbrew/.linuxbrew"
  become: no

- name: Install tools via brew
  import_role:
    name: homebrew

- name: Install fzf key bindings
  shell:
    cmd: $(brew --prefix)/bin/fzf/install

- name: Install rustup
  shell:
    cmd: |
      curl -sSf https://sh.rustup.rs | sh -s -- -y
    creates: |
      "{{ ansible_env.HOME }}/.cargo"
      "{{ ansible_env.HOME }}/.rustup"

- name: Install zinit
  shell:
    cmd: sh -c "$(curl -fsSL https://raw.githubusercontent.com/zdharma/zinit/master/doc/install.sh)"
    creates: "{{ ansible_env.HOME }}/.zinit"

- name: Install dein.vim
  import_role:
    name: dein

- name: Install tpm(tmux plugin manager)
  import_role:
    name: tmux

- name: Install docker
  import_role:
    name: docker

- name: Install heroku CLI
  import_role:
    name: heroku
